// 기존 chill한 문구들 (날씨 무관)
const basicGreetings = {
  dawn: [
    "🌙 세상이 조용한 밤, 생각하기 좋은 시간이네요",
    "✨ 밤늦은 산책을 하고 싶은 기분입니다",
    "🌌 별 보기 좋은 새벽이에요",
    "💤 모두가 꿈꾸는 시간, 혼자만의 여유를 즐기고 있어요"
  ],
  morning: [
    "☀️ 커피 한 잔과 함께 시작하는 상쾌한 아침입니다",
    "🌅 창문을 열고 싶어지는 좋은 날씨네요",
    "☕ 모닝 루틴을 천천히 즐기고 있어요",
    "🌱 새로운 하루, 뭔가 좋은 일이 생길 것 같은 기분이에요"
  ],
  afternoon: [
    "☕ 커피 한잔하기 좋은 오후입니다",
    "🌞 점심 후 여유롭게 보내는 오후 시간이에요",
    "🎵 좋아하는 음악 들으며 쉬고 있어요",
    "🌿 산책하고 싶어지는 따뜻한 오후네요"
  ],
  evening: [
    "🌆 하루 마무리하며 차 한 잔 마시고 있어요",
    "🌙 오늘 하루도 수고 많았네요, 이제 쉬어도 될 시간",
    "📚 책 읽기 좋은 조용한 저녁입니다",
    "🕯️ 편안하게 보내는 저녁 시간이에요"
  ]
};

// 날씨별 특화 문구들
const weatherGreetings = {
  dawn: {
    sunny: [
      "🌙 별빛이 아름다운 고요한 밤이네요",
      "✨ 맑은 하늘, 새벽 산책하기 좋은 시간이에요",
      "🌌 구름 한 점 없는 새벽, 생각하기 좋은 시간입니다"
    ],
    cloudy: [
      "☁️ 구름이 낀 새벽, 몽환적인 분위기네요",
      "🌫️ 흐린 새벽, 따뜻한 차 한 잔이 그리워집니다",
      "☁️ 구름 사이로 스며드는 새벽빛이 신비로워요"
    ],
    rainy: [
      "🌧️ 새벽비 소리가 마음을 차분하게 만드네요",
      "☔ 빗방울이 창문을 두드리는 평온한 새벽입니다",
      "🌧️ 비 오는 새벽, 집 안이 더욱 포근하게 느껴져요"
    ],
    snowy: [
      "❄️ 새벽눈이 세상을 하얗게 물들이고 있어요",
      "🌨️ 눈 내리는 새벽, 세상이 고요해집니다",
      "❄️ 하얀 새벽, 따뜻한 이불이 더욱 소중해요"
    ]
  },
  morning: {
    sunny: [
      "☀️ 햇살 좋은 아침, 에너지가 충전되는 기분이에요",
      "🌅 맑은 아침 하늘, 기분 좋은 하루가 될 것 같아요",
      "☀️ 따뜻한 햇빛과 함께 상쾌한 아침입니다"
    ],
    cloudy: [
      "☁️ 구름 낀 아침, 선선해서 산책하기 좋겠어요",
      "⛅ 흐린 하늘이지만 나름 운치 있는 아침이네요",
      "☁️ 구름이 많은 아침, 커피가 더욱 맛있을 것 같아요"
    ],
    rainy: [
      "🌧️ 비 오는 아침, 실내에서 여유롭게 보내고 있어요",
      "☔ 아침비와 함께 시작하는 촉촉한 하루입니다",
      "🌦️ 비 내리는 아침, 창가에서 커피 마시기 좋은 날이에요"
    ],
    snowy: [
      "❄️ 눈 오는 아침, 세상이 동화 같아 보여요",
      "🌨️ 하얀 아침, 따뜻한 코코아가 생각나네요",
      "❄️ 눈꽃이 피는 아침, 겨울의 낭만을 만끽하고 있어요"
    ]
  },
  afternoon: {
    sunny: [
      "☀️ 햇살 가득한 오후, 야외 활동하기 완벽한 날이에요",
      "🌞 맑은 오후 하늘, 기분까지 맑아지는 시간입니다",
      "☀️ 따스한 햇빛 아래서 여유로운 오후를 보내고 있어요"
    ],
    cloudy: [
      "☁️ 적당히 흐린 오후, 산책하기 딱 좋은 날씨네요",
      "⛅ 구름 낀 오후, 편안한 기분으로 쉬고 있어요",
      "☁️ 선선한 오후, 좋아하는 음악 들으며 휴식 중입니다"
    ],
    rainy: [
      "🌧️ 비 오는 오후, 창밖을 바라보며 여유를 즐기고 있어요",
      "☔ 오후비와 함께 차분한 시간을 보내고 있습니다",
      "🌦️ 비 내리는 오후, 실내가 더욱 아늑하게 느껴져요"
    ],
    snowy: [
      "❄️ 눈 오는 오후, 따뜻한 실내에서 겨울 정취를 만끽해요",
      "🌨️ 하얀 오후, 눈 구경하며 여유로운 시간입니다",
      "❄️ 눈꽃이 춤추는 오후, 겨울의 아름다움에 빠져있어요"
    ]
  },
  evening: {
    sunny: [
      "🌅 석양이 아름다운 저녁, 하루를 마무리하고 있어요",
      "🌆 맑은 저녁 하늘, 오늘 하루도 알차게 보냈네요",
      "🌇 노을 지는 저녁, 감사한 마음으로 하루를 정리합니다"
    ],
    cloudy: [
      "☁️ 구름 낀 저녁, 차분한 마음으로 하루를 되돌아봐요",
      "🌃 흐린 저녁 하늘, 조용히 책 읽기 좋은 시간이네요",
      "☁️ 운치 있는 저녁, 따뜻한 차와 함께 휴식하고 있어요"
    ],
    rainy: [
      "🌧️ 비 오는 저녁, 집이 더욱 포근하게 느껴집니다",
      "☔ 저녁비 소리를 들으며 평온한 시간을 보내고 있어요",
      "🌦️ 촉촉한 저녁, 하루의 피로가 씻겨나가는 기분이에요"
    ],
    snowy: [
      "❄️ 눈 내리는 저녁, 따뜻한 집에서 겨울 낭만을 즐겨요",
      "🌨️ 하얀 저녁, 창밖 설경을 바라보며 차 한 잔 마시고 있어요",
      "❄️ 눈꽃이 피는 저녁, 조용하고 아름다운 시간입니다"
    ]
  }
};

// 날씨 이모지를 카테고리로 분류하는 함수
function categorizeWeather(weatherEmoji) {
  const weatherCategories = {
    sunny: ['☀️', '🌤️', '🌙'],
    cloudy: ['☁️', '⛅'],
    rainy: ['🌧️', '🌦️', '☔'],
    snowy: ['❄️', '🌨️'],
    stormy: ['⛈️'],
    foggy: ['🌫️']
  };

  for (const [category, emojis] of Object.entries(weatherCategories)) {
    if (emojis.includes(weatherEmoji)) {
      return category;
    }
  }
  return 'sunny'; // 기본값
}

// 시간대와 날씨에 맞는 랜덤 문구 선택 (기존 + 날씨별 혼합)
function getRandomGreeting(timeOfDay, weatherEmoji) {
  const weatherCategory = categorizeWeather(weatherEmoji);
  
  // 기존 문구들
  const basicMessages = basicGreetings[timeOfDay] || [];
  
  // 날씨별 특화 문구들
  const weatherMessages = (weatherGreetings[timeOfDay] && weatherGreetings[timeOfDay][weatherCategory]) || [];
  
  // 두 배열을 합쳐서 랜덤 선택
  const allMessages = [...basicMessages, ...weatherMessages];
  
  return allMessages[Math.floor(Math.random() * allMessages.length)];
}

module.exports = { getRandomGreeting };
